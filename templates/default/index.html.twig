{% extends 'base.html.twig' %}

{% block title %}Imply{% endblock %}

{% block body %}
    <div class="col-12 shadow-sm" id="main-screen">
        <div class="col-12 justify-content-end d-flex div-top-price">
            <label class="align-self-center mr-2 fs-2 font-weight-bold" for="total">Total R$:</label>
            <input class="bg-white price-input text-end col-2 fs-1 font-weight-bold border border-dark" type="text" name="total" id="total" value="50" disabled>
        </div>
    </div>

    <div class="col-12 mt-1">
        <div class="input-group mb-3 col-12">
            <input type="text" class="form-control" placeholder="Digite o nome ou a referência do produto" aria-label="Digite o nome ou a referência do produto" aria-describedby="button-icon" id="search-bar">
            <button class="btn btn-outline-secondary" type="button" id="button-icon">
                <i class="bi bi-search"></i>
            </button>
        </div>
    </div>

    <h2>Lista de Produtos</h2>

    <table class="border border-dark mt-2 display table table-hover table-responsive-sm" id="productsTable">
        <thead>
        <tr>
            <th>Produto</th>
            <th>Preço</th>
            <th>Quantidade</th>
            <th>Remover do carrinho</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Produto A</td>
            <td>R$ 50,00</td>
            <td>100</td>
            <td>X</td>
        </tr>
        <tr>
            <td>Produto B</td>
            <td>R$ 30,00</td>
            <td>50</td>
            <td>X</td>

        </tr>
        <tr>
            <td>Produto C</td>
            <td>R$ 80,00</td>
            <td>75</td>
            <td>X</td>
        </tr>
        </tbody>
    </table>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        let table = new DataTable('#productsTable');

        $('#button-icon').click(function (e) {
            e.preventDefault();
            let productSearch = $('#search-bar').val()

            $.ajax({
                url:'/add_product_to_cart',
                type: 'POST',
                data: {productSearch: productSearch},
                success: function (response) {
                    if(response.code != 200) {
                        $.alert({
                            title: 'Não encontrado!',
                            content: 'Produto não encontrado',
                        });
                    }
                }
            })
        })

    </script>
{% endblock %}

